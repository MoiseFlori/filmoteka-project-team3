let e=[];async function t(){return 0===e.length&&await async function(){try{const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US"),n=await t.json();return n.genres&&(e=n.genres),e}catch(e){return console.error("Eroare la încărcarea genurilor:",e),[]}}(),e}document.getElementById("search-form"),document.querySelector(".form-input");const n=document.querySelector(".movies"),o=(document.querySelector(".header"),document.querySelector(".menu__link-home"),document.querySelector(".menu__link-library"),document.querySelector(".modal__backdrop"),document.getElementById("modal"),document.querySelector(".warning-notification"),document.querySelector(".pagination-container"),document.querySelector('[data-index="1"]')),r=document.querySelector('[data-index="2"]'),a=document.querySelector('[data-index="3"]'),i=document.querySelector('[data-index="4"]'),c=document.querySelector('[data-index="5"]'),s=document.querySelector(".first-button"),l=document.querySelector(".last-button"),d=document.querySelector(".pagination-container"),u=document.querySelector(".arrow-right"),m=document.querySelector(".arrow-left"),v=document.querySelector("#previous"),g=document.querySelector("#after");d.addEventListener("click",(function(e){const t=e.target;"BUTTON"===t.tagName&&(t.blur(),t.classList.contains("pagination-button")&&t.dataset.index?y=Number(t.textContent):t.classList.contains("arrow-right")&&y<20?y+=1:t.classList.contains("arrow-left")&&y>1?y-=1:t.classList.contains("first-button")?y=1:t.classList.contains("last-button")&&(y=20),function(){const e=20;let t=y-2,n=y+2;t<1&&(t=1,n=Math.min(5,e));n>e&&(n=e,t=Math.max(e-4,1));[o,r,a,i,c].forEach(((e,n)=>{const o=t+n;e.textContent=o,e.classList.toggle("pagination--current",o==y)})),s.hidden=y<=3,m.hidden=y<=1,u.hidden=y>=e,l.hidden=y>=e-2,v.hidden=t<=1,g.hidden=n>=e}(),n.innerHTML="",window.scrollTo({top:0,behavior:"smooth"}),b())}));let y=1;document.querySelectorAll(".pagination-button");v.hidden=!0,m.hidden=!0,s.hidden=!0;let p=9;async function f(){const e=`https://api.themoviedb.org/3/movie/popular?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US&page=${y}`;try{const n=await fetch(e),o=await n.json();if(!o.results||0===o.results.length)return console.error("No popular movies found:",o),[];const r=await t();return o.results.map((e=>({...e,genre_names:e.genre_ids.map((e=>r.find((t=>t.id===e))?.name||"Unknown"))})))}catch(e){return console.error("Error fetching popular movies:",e),[]}}async function h(e){const t=`https://api.themoviedb.org/3/movie/${e}?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US`;try{console.log(`Fetching details for movie ID: ${e}`);const n=await fetch(t);if(!n.ok)throw new Error("Failed to fetch movie details");const o=await n.json();return console.log("Movie details fetched:",o),o}catch(e){throw console.error("Error fetching movie details:",e),e}}async function E(e,t){const n=`https://api.themoviedb.org/3/search/movie?${new URLSearchParams({api_key:"21161239b69d8dd6ebeec5ac6086d760",query:e,page:t,language:"en-US",include_adult:!1})}`;try{console.log(`searchMovies(${e},${t}) with URL: ${n}`);const o=await fetch(n),r=await o.json();return r&&r.results?r:(console.warn("Invalid response or no results."),{results:[]})}catch(e){return console.error("Error fetching movies:",e),{results:[]}}}async function w(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=21161239b69d8dd6ebeec5ac6086d760`),n=(await t.json()).results.find((e=>"Trailer"===e.type&&"YouTube"===e.site));return n?`https://www.youtube.com/embed/${n.key}`:null}catch(e){return console.error("Error fetching trailer URL:",e),null}}function _(e){let t="movie__average--red";e.vote_average>=7?t="movie__average--green":e.vote_average>=5&&(t="movie__average--orange");const n=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"./images/no-image-available.jpg",o=e.poster_path?`${e.title||""} movie poster`:"No poster available",r=e.genre_names||[];let a=r.slice(0,2);r.length>2&&a.push("Other");const i=r.length>0?a.join(", "):"",c=void 0!==e.vote_average?e.vote_average.toFixed(1):"",s=e.release_date?new Date(e.release_date).getFullYear():"";return`\n    <li class="movie_list_item" data-movie-id="${e.id||""}">\n      <div class="movie__cover-inner">\n        <img \n          class="movie__cover" \n          src="${n}" \n          alt="${o}" \n        />\n      </div>\n      <div class="movie__cover--darkened"></div>\n      <div class="movie-info">\n        ${e.title?`<h3 class="movie-title">${e.title}</h3>`:""}\n        ${i||s?`<p class="movie-date">${[i,s].filter(Boolean).join(" | ")}</p>`:""}\n        ${c?`<div class="movie__average ${t}">${c}</div>`:""}\n      </div>\n    </li>\n  `}async function b(){try{const e=await f(),t=document.querySelector(".movies");if(!e||0===e.length)return console.error("Niciun film pentru afișare."),void(t.innerHTML="<p>No movies found.</p>");const n=(window.innerWidth>=1024?p=9:window.innerWidth>=768&&window.innerWidth<1024?p=8:window.innerWidth<768&&(p=4),p),o=e.slice(0,n).map(_).join("");t.innerHTML=o}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}async function L(e,n){const o=document.querySelector(".movies"),r=document.querySelector("#search-error");try{console.log("Apelare la funcția renderSearchedMovies...");const a=(await E(e,n))?.results||[];if(!Array.isArray(a)||0===a.length)return console.warn("No movies found."),r.style.display="block",void(o.innerHTML='\n        <p class="error-message" style="text-align: center; font-size: 18px; color: red;">\n          No movies found. Please try a different search term.\n        </p>\n      ');const i=await t(),c=a.map((e=>({...e,genre_names:Array.isArray(e.genre_ids)?e.genre_ids.map((e=>i.find((t=>t.id===e))?.name||"Unknown Genre")):[]})));r.style.display="none";const s=c.map(_).join("");o.innerHTML=s}catch(e){console.error("Eroare la afișarea filmelor:",e),r.style.display="block",o.innerHTML='\n      <p class="error-message" style="text-align: center; font-size: 18px; color: red;">\n        Error loading movies. Please try again later.\n      </p>\n    '}}const S=document.querySelector(".search");function k(){const e=document.getElementById("trailer-modal-container"),t=document.getElementById("trailer-backdrop"),n=document.getElementById("trailer-content");function o(){n.innerHTML="",e.classList.remove("open")}return t.addEventListener("click",o),document.addEventListener("keydown",(t=>{"Escape"===t.key&&e.classList.contains("open")&&o()})),function(t){n.innerHTML=`\n      <iframe \n        src="${t}" \n        frameborder="0" \n        allow="autoplay; encrypted-media" \n        allowfullscreen>\n      </iframe>`,e.classList.add("open")}}function q(e){return JSON.parse(localStorage.getItem(e))||[]}function T(e,t){return q(e).some((e=>e.id===t))}function x(e,t){let n=q(e);T(e,t.id)?n=n.filter((e=>e.id!==t.id)):n.push(t),localStorage.setItem(e,JSON.stringify(n))}document.querySelector(".search-button").addEventListener("click",(function(e){e.preventDefault();""!==S.value.trim()&&(L(S.value.trim(),1),S.value="")})),S.addEventListener("keydown",(function(e){if("Enter"===e.key){e.preventDefault();const t=1;if(""===S.value.trim())return;L(S.value.trim(),t),S.value=""}}));const M=document.getElementById("library-btn"),$=document.getElementById("home-btn"),I=document.getElementById("search-form"),B=document.getElementById("library-buttons"),U=document.getElementById("watched-button"),A=document.getElementById("queue-button");function D(e){U.textContent=T("watched",e.id)?"REMOVE FROM WATCHED":"ADD TO WATCHED",A.textContent=T("queue",e.id)?"REMOVE FROM QUEUE":"ADD TO QUEUE",U.onclick=()=>{x("watched",e),U.textContent=T("watched",e.id)?"REMOVE FROM WATCHED":"ADD TO WATCHED"},A.onclick=()=>{x("queue",e),A.textContent=T("queue",e.id)?"REMOVE FROM QUEUE":"ADD TO QUEUE"}}function O(){function e(){I.style.display="block",B.style.display="none",$.classList.add("active"),M.classList.remove("active")}$.addEventListener("click",e),M.addEventListener("click",(function(){I.style.display="none",B.style.display="flex",M.classList.add("active"),$.classList.remove("active")})),e()}async function C(){const e=document.querySelector(".movies"),t=document.querySelector(".modal-wrapper"),n=document.querySelector(".backdrop"),o=document.getElementById("poster-section"),r=document.getElementById("movie-title"),a=(document.getElementById("movie-votes"),document.getElementById("movie-popularity")),i=document.getElementById("original-title"),c=document.getElementById("movie-genre"),s=document.getElementById("movie-about"),l=document.getElementById("trailer-button"),d=k();function u(){document.body.classList.remove("modal-open"),t.classList.remove("open"),n.removeEventListener("click",u),document.removeEventListener("keydown",m),t.removeEventListener("click",v)}function m(e){"Escape"===e.key&&t.classList.contains("open")&&u()}function v(e){document.getElementById("movie-details").contains(e.target)||u()}e.addEventListener("click",(e=>{const g=e.target.closest(".movie_list_item");if(g){!async function(e){try{!function(e){o.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500/${e.poster_path||""}')`,r.textContent=e.title||"No Title";let g="movie__average--red";e.vote_average>=7?g="movie__average--green":e.vote_average>=5&&(g="movie__average--orange");const y=document.querySelector("#modal-movie-votes");y&&(y.innerHTML=`\n    <span class="vote-average ${g}">\n      ${e.vote_average?.toFixed(1)||"N/A"}\n    </span>\n    <span class="vote-separator">/</span>\n    <span class="vote-count">\n      ${e.vote_count||0}\n    </span>\n  `);a.textContent=e.popularity?.toFixed(1)||"N/A",i.textContent=e.original_title||"N/A",c.textContent=e.genres?.map((e=>e.name)).join(", ")||"Unknown",s.textContent=e.overview||"No description available.",l.onclick=()=>async function(e){try{const t=await w(e);t?d(t):alert("Trailer not available.")}catch(e){console.error("Error fetching trailer:",e)}}(e.id),D(e),document.body.classList.add("modal-open"),t.classList.add("open"),n.addEventListener("click",u),document.addEventListener("keydown",m),t.addEventListener("click",v)}(await h(e))}catch(e){console.error("Error fetching movie details:",e)}}(g.getAttribute("data-movie-id"))}}));!function(t){e.innerHTML="";const n=t.map((e=>_(e))).join("");e.innerHTML=n}(await f())}document.addEventListener("DOMContentLoaded",(()=>{b(),C(),O()}));
//# sourceMappingURL=index.6535eed6.js.map
