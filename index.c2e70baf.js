async function e(){const e="https://api.themoviedb.org/3/genre/movie/list?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US";try{console.log("Cerere la API-ul de genuri:",e);const t=await fetch(e),o=await t.json();return o.genres&&0!==o.genres.length?(console.log("Genuri obținute:",o.genres),o.genres):(console.error("Niciun gen găsit:",o),[])}catch(e){return console.error("Eroare la API-ul de genuri:",e),[]}}let t=[];async function o(){return 0===t.length&&(t=await e()),t}async function n(){try{console.log("Fetching popular movies...");const e=await fetch("https://api.themoviedb.org/3/movie/popular?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US&page=1"),t=await e.json();if(!t.results||0===t.results.length)return console.error("No popular movies found:",t),[];const n=await o();console.log("Genres retrieved:",n);const i=t.results.map((e=>({...e,genre_names:e.genre_ids.map((e=>n.find((t=>t.id===e))?.name||"Unknown"))})));return console.log("Movies with genres:",i),i}catch(e){return console.error("Error fetching popular movies:",e),[]}}function i(e){let t="movie__average--red";e.vote_average>=7?t="movie__average--green":e.vote_average>=5&&(t="movie__average--orange");const o=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"./images/no-image-available.jpg",n=e.poster_path?`${e.title} movie poster`:`No poster available for ${e.title}`;let i=e.genre_names.slice(0,2);e.genre_names.length>2&&i.push("Other");const r=i.join(", ");return`\n    <li class="movie_list_item">\n      <div class="movie__cover-inner">\n        <img \n          class="movie__cover" \n          src="${o}" \n          alt="${n}" \n        />\n        <div class="movie__cover--darkened"></div>\n      </div>\n      <div class="movie-info">\n        <h3 class="movie-title">${e.title}</h3>\n        <p class="movie-date">${r} | ${new Date(e.release_date).getFullYear()}</p>\n        <div class="movie__average ${t}">\n          ${e.vote_average.toFixed(1)}\n        </div>\n      </div>\n    </li>\n  `}async function r(){try{console.log("Apelare la funcția renderMovies...");const e=await n(),t=document.querySelector(".movies");if(!e||0===e.length)return console.error("Niciun film pentru afișare."),void(t.innerHTML="<p>No movies found.</p>");const o=e.map(i).join("");console.log("HTML-ul generat pentru filme:",o),t.innerHTML=o}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}async function a(){const e=document.querySelector(".movies"),t=document.querySelector(".modal-wrapper"),o=document.querySelector(".backdrop"),r=document.getElementById("poster-section"),a=document.getElementById("movie-title"),c=document.getElementById("movie-votes"),l=document.getElementById("movie-popularity"),s=document.getElementById("original-title"),d=document.getElementById("movie-genre"),m=document.getElementById("movie-about"),g=document.getElementById("trailer-button");function v(){t.classList.remove("open")}o.addEventListener("click",v),document.addEventListener("keydown",(e=>{"Escape"===e.key&&t.classList.contains("open")&&v()}));const u=await n();var p;p=u,e.innerHTML="",p.forEach((o=>{const n=document.createElement("li");n.classList.add("movie_list_item"),n.setAttribute("data-movie-id",o.id),n.innerHTML=i(o),n.addEventListener("click",(()=>{console.log("Clicked movie card:",o.id),async function(e){try{const n=await async function(e){const t=`https://api.themoviedb.org/3/movie/${e}?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US`;try{console.log(`Fetching details for movie ID: ${e}`);const o=await fetch(t);if(!o.ok)throw new Error("Failed to fetch movie details");const n=await o.json();return console.log("Movie details fetched:",n),n}catch(e){throw console.error("Error fetching movie details:",e),e}}(e);o=n,r.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500/${o.poster_path||""}')`,a.textContent=o.title||"No Title",c.textContent=`${o.vote_average?.toFixed(1)||"N/A"} / ${o.vote_count||0}`,l.textContent=o.popularity?.toFixed(1)||"N/A",s.textContent=o.original_title||"N/A",d.textContent=o.genres?.map((e=>e.name)).join(", ")||"Unknown",m.textContent=o.overview||"No description available.",g.onclick=()=>async function(e){try{const t=await fetchTrailerUrl(e);t?window.open(t,"_blank"):alert("Trailer not available.")}catch(e){console.error("Error fetching trailer:",e)}}(o.id),t.classList.add("open")}catch(e){console.error("Error fetching movie details:",e)}var o}(o.id)})),e.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(()=>{console.log("App initialized"),r(),a()}));
//# sourceMappingURL=index.c2e70baf.js.map
