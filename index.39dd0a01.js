async function e(){try{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US"),t=await e.json();return t.genres&&0!==t.genres.length?t.genres:[]}catch(e){return[]}}document.getElementById("search-form"),document.querySelector(".search__input");const t=document.querySelector(".movies"),n=(document.querySelector(".header"),document.querySelector(".menu__link-home"),document.querySelector(".menu__link-library"),document.querySelector(".modal__backdrop"),document.getElementById("modal"),document.querySelector(".warning-notification"),document.querySelector(".pagination-container"),document.querySelector('[data-index="1"]')),o=document.querySelector('[data-index="2"]'),r=document.querySelector('[data-index="3"]'),i=document.querySelector('[data-index="4"]'),a=document.querySelector('[data-index="5"]'),c=document.querySelector(".first-button"),s=document.querySelector(".last-button"),d=document.querySelector(".pagination-container"),l=document.querySelector(".arrow-right"),u=document.querySelector(".arrow-left"),m=document.querySelector("#previous"),v=document.querySelector("#after");d.addEventListener("click",(function(e){const d=e.target;"BUTTON"===d.tagName&&(d.blur(),d.classList.contains("pagination-button")&&d.dataset.index?g=Number(d.textContent):d.classList.contains("arrow-right")&&g<20?g+=1:d.classList.contains("arrow-left")&&g>1?g-=1:d.classList.contains("first-button")?g=1:d.classList.contains("last-button")&&(g=20),function(){const e=20;let t=g-2,d=g+2;t<1&&(t=1,d=Math.min(5,e));d>e&&(d=e,t=Math.max(e-4,1));[n,o,r,i,a].forEach(((e,n)=>{const o=t+n;e.textContent=o,e.classList.toggle("pagination--current",o==g)})),c.hidden=g<=3,u.hidden=g<=1,l.hidden=g>=e,s.hidden=g>=e-2,m.hidden=t<=1,v.hidden=d>=e}(),t.innerHTML="",window.scrollTo({top:0,behavior:"smooth"}),L())}));let g=1;document.querySelectorAll(".pagination-button");m.hidden=!0,u.hidden=!0,c.hidden=!0;let p=9;let y=[];async function h(){return 0===y.length&&(y=await e()),y}async function f(){const e=`https://api.themoviedb.org/3/movie/popular?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US&page=${g}`;try{const t=await fetch(e),n=await t.json();if(!n.results||0===n.results.length)return console.error("No popular movies found:",n),[];const o=await h();return n.results.map((e=>({...e,genre_names:e.genre_ids.map((e=>o.find((t=>t.id===e))?.name||"Unknown"))})))}catch(e){return console.error("Error fetching popular movies:",e),[]}}async function E(e){const t=`https://api.themoviedb.org/3/movie/${e}?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US`;try{console.log(`Fetching details for movie ID: ${e}`);const n=await fetch(t);if(!n.ok)throw new Error("Failed to fetch movie details");const o=await n.json();return console.log("Movie details fetched:",o),o}catch(e){throw console.error("Error fetching movie details:",e),e}}async function _(e,t){const n=`https://api.themoviedb.org/3/search/movie?${new URLSearchParams({api_key:"21161239b69d8dd6ebeec5ac6086d760",query:e,page:t,language:"en-US",include_adult:!1})}`;try{console.log(`searchMovies(${e},${t}) with URL: ${n}`);const o=await fetch(n),r=await o.json();return console.log(r),!1===r.success?(console.error("The resource you requested could not be found."),!1):r}catch(e){return console.error("Error fetching movie by Id:",e),[]}}async function b(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=21161239b69d8dd6ebeec5ac6086d760`),n=(await t.json()).results.find((e=>"Trailer"===e.type&&"YouTube"===e.site));return n?`https://www.youtube.com/embed/${n.key}`:null}catch(e){return console.error("Error fetching trailer URL:",e),null}}function w(e){let t="movie__average--red";e.vote_average>=7?t="movie__average--green":e.vote_average>=5&&(t="movie__average--orange");const n=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"./images/no-image-available.jpg",o=e.poster_path?`${e.title} movie poster`:`No poster available for ${e.title}`;void 0===e.genre_names&&(e.genre_names=[]);let r=e.genre_names.slice(0,2);e.genre_names.length>2&&r.push("Other");const i=r.join(", ");return`\n    <li class="movie_list_item" data-movie-id="${e.id}">\n      <div class="movie__cover-inner">\n        <img \n          class="movie__cover" \n          src="${n}" \n          alt="${o}" \n        />\n      </div>\n      <div class="movie__cover--darkened"></div>\n        <div class="movie-info">\n          <h3 class="movie-title">${e.title}</h3>\n          <p class="movie-date">${i} | ${new Date(e.release_date).getFullYear()}</p>\n                  <div class="movie__average ${t}">\n                    ${e.vote_average.toFixed(1)}\n          </div>\n      </div>\n    </li>\n  `}async function L(){try{const e=await f(),t=document.querySelector(".movies");if(!e||0===e.length)return console.error("Niciun film pentru afișare."),void(t.innerHTML="<p>No movies found.</p>");const n=(window.innerWidth>=1024?p=9:window.innerWidth>=768&&window.innerWidth<1024?p=8:window.innerWidth<768&&(p=4),p),o=e.slice(0,n).map(w).join("");t.innerHTML=o}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}async function S(e,t){try{console.log("Apelare la funcția renderSearchedMovies...");const n=await _(e,t),o=document.querySelector(".movies"),r=n.results;n.page,n.total_pages;if(console.log(n),!r||0===r.length)return console.error("Niciun film pentru afișare."),void(o.innerHTML="<p>No movies found.</p>");const i=r.map(w).join("");console.log("HTML-ul generat pentru filme:",i),o.innerHTML=i}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}console.log("*** Loaded searchbar.js");const q=document.querySelector(".search"),k=document.querySelector(".search-button"),T=document.querySelector(".pagination");function M(){const e=document.getElementById("trailer-modal-container"),t=document.getElementById("trailer-backdrop"),n=document.getElementById("trailer-content");function o(){n.innerHTML="",e.classList.remove("open")}return t.addEventListener("click",o),document.addEventListener("keydown",(t=>{"Escape"===t.key&&e.classList.contains("open")&&o()})),function(t){n.innerHTML=`\n      <iframe \n        src="${t}" \n        frameborder="0" \n        allow="autoplay; encrypted-media" \n        allowfullscreen>\n      </iframe>`,e.classList.add("open")}}function I(e){return JSON.parse(localStorage.getItem(e))||[]}function $(e,t){return I(e).some((e=>e.id===t))}function x(e,t){let n=I(e);$(e,t.id)?n=n.filter((e=>e.id!==t.id)):n.push(t),localStorage.setItem(e,JSON.stringify(n))}console.log(T),q.addEventListener("click",(function(e){e.preventDefault();S(q.value,1)})),k.addEventListener("click",(function(e){e.preventDefault();S(q.value,1)}));const B=document.getElementById("library-btn"),U=document.getElementById("home-btn"),D=document.getElementById("search-form"),H=document.getElementById("library-buttons"),O=document.getElementById("watched-button"),C=document.getElementById("queue-button");function N(e){O.textContent=$("watched",e.id)?"REMOVE FROM WATCHED":"ADD TO WATCHED",C.textContent=$("queue",e.id)?"REMOVE FROM QUEUE":"ADD TO QUEUE",O.onclick=()=>{x("watched",e),O.textContent=$("watched",e.id)?"REMOVE FROM WATCHED":"ADD TO WATCHED"},C.onclick=()=>{x("queue",e),C.textContent=$("queue",e.id)?"REMOVE FROM QUEUE":"ADD TO QUEUE"}}function A(){function e(){D.style.display="block",H.style.display="none",U.classList.add("active"),B.classList.remove("active")}U.addEventListener("click",e),B.addEventListener("click",(function(){D.style.display="none",H.style.display="flex",B.classList.add("active"),U.classList.remove("active")})),e()}async function j(){const e=document.querySelector(".movies"),t=document.querySelector(".modal-wrapper"),n=document.querySelector(".backdrop"),o=document.getElementById("poster-section"),r=document.getElementById("movie-title"),i=(document.getElementById("movie-votes"),document.getElementById("movie-popularity")),a=document.getElementById("original-title"),c=document.getElementById("movie-genre"),s=document.getElementById("movie-about"),d=document.getElementById("trailer-button"),l=M();function u(){document.body.classList.remove("modal-open"),t.classList.remove("open"),n.removeEventListener("click",u),document.removeEventListener("keydown",m),t.removeEventListener("click",v)}function m(e){"Escape"===e.key&&t.classList.contains("open")&&u()}function v(e){document.getElementById("movie-details").contains(e.target)||u()}e.addEventListener("click",(e=>{const g=e.target.closest(".movie_list_item");if(g){!async function(e){try{!function(e){o.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500/${e.poster_path||""}')`,r.textContent=e.title||"No Title";let g="movie__average--red";e.vote_average>=7?g="movie__average--green":e.vote_average>=5&&(g="movie__average--orange");const p=document.querySelector("#modal-movie-votes");p&&(p.innerHTML=`\n    <span class="vote-average ${g}">\n      ${e.vote_average?.toFixed(1)||"N/A"}\n    </span>\n    <span class="vote-separator">/</span>\n    <span class="vote-count">\n      ${e.vote_count||0}\n    </span>\n  `);i.textContent=e.popularity?.toFixed(1)||"N/A",a.textContent=e.original_title||"N/A",c.textContent=e.genres?.map((e=>e.name)).join(", ")||"Unknown",s.textContent=e.overview||"No description available.",d.onclick=()=>async function(e){try{const t=await b(e);t?l(t):alert("Trailer not available.")}catch(e){console.error("Error fetching trailer:",e)}}(e.id),N(e),document.body.classList.add("modal-open"),t.classList.add("open"),n.addEventListener("click",u),document.addEventListener("keydown",m),t.addEventListener("click",v)}(await E(e))}catch(e){console.error("Error fetching movie details:",e)}}(g.getAttribute("data-movie-id"))}}));!function(t){e.innerHTML="";const n=t.map((e=>w(e))).join("");e.innerHTML=n}(await f())}document.addEventListener("DOMContentLoaded",(()=>{L(),j(),A()}));
//# sourceMappingURL=index.39dd0a01.js.map
