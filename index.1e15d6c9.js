async function e(){const e="https://api.themoviedb.org/3/genre/movie/list?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US";try{console.log("Cerere la API-ul de genuri:",e);const o=await fetch(e),t=await o.json();return t.genres&&0!==t.genres.length?(console.log("Genuri obținute:",t.genres),t.genres):(console.error("Niciun gen găsit:",t),[])}catch(e){return console.error("Eroare la API-ul de genuri:",e),[]}}let o=[];async function t(){return 0===o.length&&(o=await e()),o}async function n(){try{console.log("Fetching popular movies...");const e=await fetch("https://api.themoviedb.org/3/movie/popular?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US&page=1"),o=await e.json();if(!o.results||0===o.results.length)return console.error("No popular movies found:",o),[];const n=await t();console.log("Genres retrieved:",n);const i=o.results.map((e=>({...e,genre_names:e.genre_ids.map((e=>n.find((o=>o.id===e))?.name||"Unknown"))})));return console.log("Movies with genres:",i),i}catch(e){return console.error("Error fetching popular movies:",e),[]}}function i(e){let o="movie__average--red";e.vote_average>=7?o="movie__average--green":e.vote_average>=5&&(o="movie__average--orange");const t=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"./images/no-image-available.jpg",n=e.poster_path?`${e.title} movie poster`:`No poster available for ${e.title}`;let i=e.genre_names.slice(0,2);e.genre_names.length>2&&i.push("Other");const r=i.join(", ");return`\n    <li class="movie_list_item">\n      <div class="movie__cover-inner">\n        <img \n          class="movie__cover" \n          src="${t}" \n          alt="${n}" \n        />\n        <div class="movie__cover--darkened"></div>\n      </div>\n      <div class="movie-info">\n        <h3 class="movie-title">${e.title}</h3>\n        <p class="movie-date">${r} | ${new Date(e.release_date).getFullYear()}</p>\n        <div class="movie__average ${o}">\n          ${e.vote_average.toFixed(1)}\n        </div>\n      </div>\n    </li>\n  `}async function r(){try{console.log("Apelare la funcția renderMovies...");const e=await n(),o=document.querySelector(".movies");if(!e||0===e.length)return console.error("Niciun film pentru afișare."),void(o.innerHTML="<p>No movies found.</p>");const t=e.map(i).join("");console.log("HTML-ul generat pentru filme:",t),o.innerHTML=t}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}async function a(){const e=document.querySelector(".movies"),o=document.querySelector(".modal-wrapper"),t=document.querySelector(".backdrop"),n=document.getElementById("poster-section"),i=document.getElementById("movie-title"),r=document.getElementById("movie-votes"),a=document.getElementById("movie-popularity"),s=document.getElementById("original-title"),c=document.getElementById("movie-genre"),l=document.getElementById("movie-about"),d=document.getElementById("trailer-button"),m="21161239b69d8dd6ebeec5ac6086d760";let v={};function g(){console.log("Closing modal..."),o.classList.remove("open")}t.addEventListener("click",g),document.addEventListener("keydown",(e=>{"Escape"===e.key&&o.classList.contains("open")&&g()})),await async function(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${m}`);if(!e.ok)throw new Error("Failed to fetch genres");const o=await e.json();v=o.genres.reduce(((e,o)=>(e[o.id]=o.name,e)),{}),console.log("Genres fetched:",v)}catch(e){console.error("Error fetching genres:",e)}}(),await async function(){try{const g=await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${m}`);if(!g.ok)throw new Error("Failed to fetch movies");const p=await g.json();console.log("Movies fetched:",p.results),t=p.results,e.innerHTML="",t.forEach((t=>{const g=document.createElement("li");g.classList.add("movie_list_item"),g.setAttribute("data-movie-id",t.id);const p=t.genre_ids.map((e=>v[e]||"Unknown")).join(", ");g.innerHTML=`\n        <div class="movie__cover-inner">\n          <img \n            class="movie__cover" \n            src="https://image.tmdb.org/t/p/w500/${t.poster_path}" \n            alt="${t.title} movie poster" \n          />\n          <div class="movie__cover--darkened"></div>\n        </div>\n        <div class="movie-info">\n          <h3 class="movie-title">${t.title}</h3>\n          <p class="movie-date">${p} | ${t.release_date||"Unknown"}</p>\n          <div class="movie__average">${t.vote_average.toFixed(1)}</div>\n        </div>\n      `,g.addEventListener("click",(()=>{console.log("Clicked movie card:",t.id),async function(e){console.log("Fetching details for movie ID:",e);const t=`https://api.themoviedb.org/3/movie/${e}`;try{const e=await fetch(`${t}?api_key=${m}`);if(!e.ok)throw new Error("Failed to fetch movie details");!function(e){console.log("Populating modal with data:",e),n.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500/${e.poster_path}')`,i.textContent=e.title,r.textContent=`${e.vote_average} / ${e.vote_count}`,a.textContent=e.popularity.toFixed(1),s.textContent=e.original_title,c.textContent=e.genres.map((e=>e.name)).join(", "),l.textContent=e.overview,d.onclick=()=>async function(e){console.log("Fetching trailer for movie ID:",e);const o=`https://api.themoviedb.org/3/movie/${e}/videos`;try{const e=await fetch(`${o}?api_key=${m}`);if(!e.ok)throw new Error("Failed to fetch trailer");const t=(await e.json()).results.find((e=>"Trailer"===e.type&&"YouTube"===e.site));t?window.open(`https://www.youtube.com/watch?v=${t.key}`,"_blank"):alert("Trailer not available.")}catch(e){console.error("Error fetching trailer:",e)}}(e.id),console.log("Opening modal..."),o.classList.add("open")}(await e.json())}catch(e){console.error("Error fetching movie details:",e)}}(t.id)})),e.appendChild(g)})),console.log("Rendered movie cards:",document.querySelectorAll(".movie_list_item"))}catch(e){console.error("Error fetching movies:",e)}var t}()}document.addEventListener("DOMContentLoaded",(()=>{console.log("App initialized"),r(),a()}));
//# sourceMappingURL=index.1e15d6c9.js.map
