async function e(){const e="https://api.themoviedb.org/3/genre/movie/list?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US";try{console.log("Cerere la API-ul de genuri:",e);const o=await fetch(e),n=await o.json();return n.genres&&0!==n.genres.length?(console.log("Genuri obținute:",n.genres),n.genres):(console.error("Niciun gen găsit:",n),[])}catch(e){return console.error("Eroare la API-ul de genuri:",e),[]}}let o=[];async function n(){return 0===o.length&&(o=await e()),o}async function t(){try{console.log("Fetching popular movies...");const e=await fetch("https://api.themoviedb.org/3/movie/popular?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US&page=1"),o=await e.json();if(!o.results||0===o.results.length)return console.error("No popular movies found:",o),[];const t=await n();console.log("Genres retrieved:",t);const r=o.results.map((e=>({...e,genre_names:e.genre_ids.map((e=>t.find((o=>o.id===e))?.name||"Unknown"))})));return console.log("Movies with genres:",r),r}catch(e){return console.error("Error fetching popular movies:",e),[]}}async function r(e,o){const n=`https://api.themoviedb.org/3/search/movie?${new URLSearchParams({api_key:"21161239b69d8dd6ebeec5ac6086d760",query:e,page:o,language:"en-US",include_adult:!1})}`;try{console.log(`searchMovies(${e},${o}) with URL: ${n}`);const t=await fetch(n),r=await t.json();return console.log(r),!1===r.success?(console.error("The resource you requested could not be found."),!1):r}catch(e){return console.error("Error fetching movie by Id:",e),[]}}function i(e){let o="movie__average--red";e.vote_average>=7?o="movie__average--green":e.vote_average>=5&&(o="movie__average--orange");const n=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"./images/no-image-available.jpg",t=e.poster_path?`${e.title} movie poster`:`No poster available for ${e.title}`;console.log("movie.genre_names"),console.log(e.genre_names),void 0===e.genre_names&&(e.genre_names=[]);let r=e.genre_names.slice(0,2);e.genre_names.length>2&&r.push("Other");const i=r.join(", ");return`\n    <li class="movie_list_item">\n      <div class="movie__cover-inner">\n        <img \n          class="movie__cover" \n          src="${n}" \n          alt="${t}" \n        />\n        <div class="movie__cover--darkened"></div>\n      </div>\n      <div class="movie-info">\n        <h3 class="movie-title">${e.title}</h3>\n        <p class="movie-date">${i} | ${new Date(e.release_date).getFullYear()}</p>\n        <div class="movie__average ${o}">\n          ${e.vote_average.toFixed(1)}\n        </div>\n      </div>\n    </li>\n  `}async function a(){try{console.log("Apelare la funcția renderMovies...");const e=await t(),o=document.querySelector(".movies");if(!e||0===e.length)return console.error("Niciun film pentru afișare."),void(o.innerHTML="<p>No movies found.</p>");const n=e.map(i).join("");console.log("HTML-ul generat pentru filme:",n),o.innerHTML=n}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}async function c(e,o){try{console.log("Apelare la funcția renderSearchedMovies...");const n=await r(e,o),t=document.querySelector(".movies"),a=n.results;n.page,n.total_pages;if(console.log(n),!a||0===a.length)return console.error("Niciun film pentru afișare."),void(t.innerHTML="<p>No movies found.</p>");const c=a.map(i).join("");console.log("HTML-ul generat pentru filme:",c),t.innerHTML=c}catch(e){console.error("Eroare la afișarea filmelor:",e),document.querySelector(".movies").innerHTML="<p>Error loading movies.</p>"}}console.log("*** Loaded searchbar.js");const l=document.querySelector(".search-field"),s=document.querySelector(".search-button"),d=document.querySelector(".pagination");async function u(){const e=document.querySelector(".movies"),o=document.querySelector(".modal-wrapper"),n=document.querySelector(".backdrop"),r=document.getElementById("poster-section"),a=document.getElementById("movie-title"),c=document.getElementById("movie-votes"),l=document.getElementById("movie-popularity"),s=document.getElementById("original-title"),d=document.getElementById("movie-genre"),u=document.getElementById("movie-about"),m=document.getElementById("trailer-button");function g(){o.classList.remove("open")}n.addEventListener("click",g),document.addEventListener("keydown",(e=>{"Escape"===e.key&&o.classList.contains("open")&&g()}));const v=await t();var p;p=v,e.innerHTML="",p.forEach((n=>{const t=document.createElement("li");t.classList.add("movie_list_item"),t.setAttribute("data-movie-id",n.id),t.innerHTML=i(n),t.addEventListener("click",(()=>{console.log("Clicked movie card:",n.id),async function(e){try{const t=await async function(e){const o=`https://api.themoviedb.org/3/movie/${e}?api_key=21161239b69d8dd6ebeec5ac6086d760&language=en-US`;try{console.log(`Fetching details for movie ID: ${e}`);const n=await fetch(o);if(!n.ok)throw new Error("Failed to fetch movie details");const t=await n.json();return console.log("Movie details fetched:",t),t}catch(e){throw console.error("Error fetching movie details:",e),e}}(e);n=t,r.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500/${n.poster_path||""}')`,a.textContent=n.title||"No Title",c.textContent=`${n.vote_average?.toFixed(1)||"N/A"} / ${n.vote_count||0}`,l.textContent=n.popularity?.toFixed(1)||"N/A",s.textContent=n.original_title||"N/A",d.textContent=n.genres?.map((e=>e.name)).join(", ")||"Unknown",u.textContent=n.overview||"No description available.",m.onclick=()=>async function(e){try{const o=await fetchTrailerUrl(e);o?window.open(o,"_blank"):alert("Trailer not available.")}catch(e){console.error("Error fetching trailer:",e)}}(n.id),o.classList.add("open")}catch(e){console.error("Error fetching movie details:",e)}var n}(n.id)})),e.appendChild(t)}))}console.log(d),l.addEventListener("click",(function(e){e.preventDefault();c(l.value,1)})),s.addEventListener("click",(function(e){e.preventDefault();c(l.value,1)})),document.addEventListener("DOMContentLoaded",(()=>{console.log("App initialized"),a(),u()}));
//# sourceMappingURL=index.fd34d158.js.map
